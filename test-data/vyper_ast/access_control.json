{"source_sha256sum": "0599bba35a7dccced61b9ff455182d2e4591252c4c4dd041ea6493c70cea5112", "node_id": 0, "resolved_path": "/home/user/tmp/snekmate/src/snekmate/auth/access_control.vy", "lineno": 1, "col_offset": 0, "source_id": 0, "body": [{"node_id": 3, "lineno": 68, "alias": null, "level": 0, "col_offset": 0, "ast_type": "ImportFrom", "end_col_offset": 33, "module": "ethereum.ercs", "src": "2641:33:0", "end_lineno": 68, "name": "IERC165", "import_info": {"alias": "IERC165", "qualified_module_name": "ethereum.ercs.IERC165", "source_id": -2, "path": "vyper/builtins/interfaces/IERC165.vyi", "resolved_path": "/home/user/.local/share/uv/tools/vyper/lib/python3.12/site-packages/vyper/builtins/interfaces/IERC165.vyi", "file_sha256sum": "acad3686e02fedd704331956fe4281433d2f7e4bba758270c308ea02d19ce3b8"}}, {"node_id": 5, "lineno": 69, "col_offset": 0, "ast_type": "ImplementsDecl", "end_col_offset": 19, "src": "2675:19:0", "end_lineno": 69, "annotation": {"node_id": 8, "id": "IERC165", "lineno": 69, "col_offset": 12, "ast_type": "Name", "end_col_offset": 19, "src": "2687:7:0", "end_lineno": 69}}, {"node_id": 10, "lineno": 75, "alias": null, "level": 1, "col_offset": 0, "ast_type": "ImportFrom", "end_col_offset": 38, "module": "interfaces", "src": "2810:38:0", "end_lineno": 75, "name": "IAccessControl", "import_info": {"alias": "IAccessControl", "qualified_module_name": "interfaces.IAccessControl", "source_id": 1, "path": "interfaces/IAccessControl.vyi", "resolved_path": "/home/user/tmp/snekmate/src/snekmate/auth/interfaces/IAccessControl.vyi", "file_sha256sum": "30812d9176225074557fcf3b4b70381485054f776bd1351918d240be5059ac2b"}}, {"node_id": 12, "lineno": 76, "col_offset": 0, "ast_type": "ImplementsDecl", "end_col_offset": 26, "src": "2849:26:0", "end_lineno": 76, "annotation": {"node_id": 15, "id": "IAccessControl", "lineno": 76, "col_offset": 12, "ast_type": "Name", "end_col_offset": 26, "src": "2861:14:0", "end_lineno": 76}}, {"node_id": 17, "lineno": 83, "col_offset": 0, "is_immutable": false, "ast_type": "VariableDecl", "is_public": true, "is_reentrant": false, "is_transient": false, "end_col_offset": 62, "is_constant": true, "value": {"args": [{"node_id": 31, "id": "bytes32", "lineno": 83, "col_offset": 54, "ast_type": "Name", "end_col_offset": 61, "src": "3102:7:0", "end_lineno": 83, "type": {"type_t": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}}}], "node_id": 28, "lineno": 83, "func": {"node_id": 29, "id": "empty", "lineno": 83, "col_offset": 48, "ast_type": "Name", "end_col_offset": 53, "src": "3096:5:0", "end_lineno": 83, "type": {"name": "empty", "typeclass": "builtin_function"}}, "col_offset": 48, "ast_type": "Call", "end_col_offset": 62, "keywords": [], "src": "3096:14:0", "end_lineno": 83, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}}, "end_lineno": 83, "src": "3048:62:0", "target": {"node_id": 18, "id": "DEFAULT_ADMIN_ROLE", "lineno": 83, "col_offset": 0, "ast_type": "Name", "end_col_offset": 18, "src": "3048:18:0", "end_lineno": 83, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}}, "annotation": {"node_id": 26, "id": "bytes32", "lineno": 83, "col_offset": 36, "ast_type": "Name", "end_col_offset": 43, "src": "3084:7:0", "end_lineno": 83}, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}}, {"node_id": 33, "lineno": 90, "col_offset": 0, "is_immutable": false, "ast_type": "VariableDecl", "is_public": false, "is_reentrant": false, "is_transient": false, "end_col_offset": 1, "is_constant": true, "value": {"node_id": 44, "lineno": 90, "col_offset": 45, "ast_type": "List", "end_col_offset": 1, "src": "3339:120:0", "end_lineno": 93, "elements": [{"node_id": 45, "lineno": 91, "col_offset": 4, "ast_type": "Hex", "end_col_offset": 14, "value": "0x01FFC9A7", "src": "3345:10:0", "end_lineno": 91, "type": {"m": 4, "name": "bytes4", "typeclass": "bytes_m"}}, {"node_id": 46, "lineno": 92, "col_offset": 4, "ast_type": "Hex", "end_col_offset": 14, "value": "0x7965DB0B", "src": "3399:10:0", "end_lineno": 92, "type": {"m": 4, "name": "bytes4", "typeclass": "bytes_m"}}], "type": {"value_type": {"m": 4, "name": "bytes4", "typeclass": "bytes_m"}, "length": 2, "name": "$SArray", "typeclass": "static_array"}}, "end_lineno": 93, "src": "3294:165:0", "target": {"node_id": 34, "id": "_SUPPORTED_INTERFACES", "lineno": 90, "col_offset": 0, "ast_type": "Name", "end_col_offset": 21, "src": "3294:21:0", "end_lineno": 90}, "annotation": {"node_id": 39, "lineno": 90, "col_offset": 32, "slice": {"node_id": 42, "lineno": 90, "col_offset": 39, "ast_type": "Int", "end_col_offset": 40, "value": 2, "src": "3333:1:0", "end_lineno": 90}, "ast_type": "Subscript", "end_col_offset": 41, "value": {"node_id": 40, "id": "bytes4", "lineno": 90, "col_offset": 32, "ast_type": "Name", "end_col_offset": 38, "src": "3326:6:0", "end_lineno": 90}, "src": "3326:9:0", "end_lineno": 90}, "type": {"value_type": {"m": 4, "name": "bytes4", "typeclass": "bytes_m"}, "length": 2, "name": "$SArray", "typeclass": "static_array"}}, {"node_id": 48, "lineno": 97, "col_offset": 0, "is_immutable": false, "ast_type": "VariableDecl", "is_public": true, "is_reentrant": false, "is_transient": false, "end_col_offset": 57, "is_constant": false, "value": null, "end_lineno": 97, "src": "3522:57:0", "target": {"node_id": 49, "id": "hasRole", "lineno": 97, "col_offset": 0, "ast_type": "Name", "end_col_offset": 7, "src": "3522:7:0", "end_lineno": 97, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "name": "HashMap", "typeclass": "hashmap"}}, "annotation": {"node_id": 54, "lineno": 97, "col_offset": 16, "slice": {"node_id": 57, "lineno": 97, "col_offset": 24, "ast_type": "Tuple", "end_col_offset": 55, "src": "3546:31:0", "end_lineno": 97, "elements": [{"node_id": 58, "id": "bytes32", "lineno": 97, "col_offset": 24, "ast_type": "Name", "end_col_offset": 31, "src": "3546:7:0", "end_lineno": 97}, {"node_id": 60, "lineno": 97, "col_offset": 33, "slice": {"node_id": 63, "lineno": 97, "col_offset": 41, "ast_type": "Tuple", "end_col_offset": 54, "src": "3563:13:0", "end_lineno": 97, "elements": [{"node_id": 64, "id": "address", "lineno": 97, "col_offset": 41, "ast_type": "Name", "end_col_offset": 48, "src": "3563:7:0", "end_lineno": 97}, {"node_id": 66, "id": "bool", "lineno": 97, "col_offset": 50, "ast_type": "Name", "end_col_offset": 54, "src": "3572:4:0", "end_lineno": 97}]}, "ast_type": "Subscript", "end_col_offset": 55, "value": {"node_id": 61, "id": "HashMap", "lineno": 97, "col_offset": 33, "ast_type": "Name", "end_col_offset": 40, "src": "3555:7:0", "end_lineno": 97}, "src": "3555:22:0", "end_lineno": 97}]}, "ast_type": "Subscript", "end_col_offset": 56, "value": {"node_id": 55, "id": "HashMap", "lineno": 97, "col_offset": 16, "ast_type": "Name", "end_col_offset": 23, "src": "3538:7:0", "end_lineno": 97}, "src": "3538:40:0", "end_lineno": 97}, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "name": "HashMap", "typeclass": "hashmap"}}, {"node_id": 72, "lineno": 101, "col_offset": 0, "is_immutable": false, "ast_type": "VariableDecl", "is_public": true, "is_reentrant": false, "is_transient": false, "end_col_offset": 47, "is_constant": false, "value": null, "end_lineno": 101, "src": "3634:47:0", "target": {"node_id": 73, "id": "getRoleAdmin", "lineno": 101, "col_offset": 0, "ast_type": "Name", "end_col_offset": 12, "src": "3634:12:0", "end_lineno": 101, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "name": "HashMap", "typeclass": "hashmap"}}, "annotation": {"node_id": 78, "lineno": 101, "col_offset": 21, "slice": {"node_id": 81, "lineno": 101, "col_offset": 29, "ast_type": "Tuple", "end_col_offset": 45, "src": "3663:16:0", "end_lineno": 101, "elements": [{"node_id": 82, "id": "bytes32", "lineno": 101, "col_offset": 29, "ast_type": "Name", "end_col_offset": 36, "src": "3663:7:0", "end_lineno": 101}, {"node_id": 84, "id": "bytes32", "lineno": 101, "col_offset": 38, "ast_type": "Name", "end_col_offset": 45, "src": "3672:7:0", "end_lineno": 101}]}, "ast_type": "Subscript", "end_col_offset": 46, "value": {"node_id": 79, "id": "HashMap", "lineno": 101, "col_offset": 21, "ast_type": "Name", "end_col_offset": 28, "src": "3655:7:0", "end_lineno": 101}, "src": "3655:25:0", "end_lineno": 101}, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "name": "HashMap", "typeclass": "hashmap"}}, {"args": {"args": [], "node_id": 89, "default": null, "lineno": 106, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 52, "src": "3701:329:0", "end_lineno": 114}, "pos": null, "node_id": 88, "lineno": 106, "col_offset": 0, "body": [{"node_id": 92, "lineno": 114, "col_offset": 4, "ast_type": "Expr", "end_col_offset": 52, "value": {"args": [{"node_id": 98, "id": "DEFAULT_ADMIN_ROLE", "lineno": 114, "col_offset": 21, "ast_type": "Name", "end_col_offset": 39, "src": "3999:18:0", "end_lineno": 114, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "DEFAULT_ADMIN_ROLE", "decl_node": {"node_id": 17, "source_id": 0}, "access_path": []}]}, {"node_id": 100, "lineno": 114, "attr": "sender", "col_offset": 41, "ast_type": "Attribute", "end_col_offset": 51, "value": {"node_id": 101, "id": "msg", "lineno": 114, "col_offset": 41, "ast_type": "Name", "end_col_offset": 44, "src": "4019:3:0", "end_lineno": 114, "type": {"name": "msg"}}, "src": "4019:10:0", "end_lineno": 114, "type": {"name": "address"}}], "node_id": 93, "lineno": 114, "func": {"node_id": 94, "lineno": 114, "attr": "_grant_role", "col_offset": 4, "ast_type": "Attribute", "end_col_offset": 20, "value": {"node_id": 95, "id": "self", "lineno": 114, "col_offset": 4, "ast_type": "Name", "end_col_offset": 8, "src": "3982:4:0", "end_lineno": 114, "type": {"name": "self"}}, "src": "3982:16:0", "end_lineno": 114, "type": {"name": "_grant_role", "type_decl_node": {"node_id": 368, "source_id": 0}, "typeclass": "contract_function"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}], "variable_writes": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "col_offset": 4, "ast_type": "Call", "end_col_offset": 52, "keywords": [], "src": "3982:48:0", "end_lineno": 114, "type": {"name": "(void)"}}, "src": "3982:48:0", "end_lineno": 114}], "ast_type": "FunctionDef", "end_col_offset": 52, "src": "3701:329:0", "decorator_list": [{"node_id": 104, "id": "deploy", "lineno": 104, "col_offset": 1, "ast_type": "Name", "end_col_offset": 7, "src": "3685:6:0", "end_lineno": 104}, {"node_id": 106, "id": "payable", "lineno": 105, "col_offset": 1, "ast_type": "Name", "end_col_offset": 8, "src": "3693:7:0", "end_lineno": 105}], "doc_string": {"node_id": 108, "lineno": 107, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev To omit the opcodes for checking the `msg.value`\n         in the creation-time EVM bytecode, the constructor\n         is declared as `payable`.\n    @notice The `DEFAULT_ADMIN_ROLE` role will be assigned\n            to the `msg.sender`.\n    ", "src": "3721:256:0", "end_lineno": 113}, "returns": null, "end_lineno": 114, "name": "__init__"}, {"args": {"args": [{"node_id": 111, "lineno": 119, "arg": "interface_id", "col_offset": 22, "ast_type": "arg", "end_col_offset": 42, "src": "4071:20:0", "end_lineno": 119, "annotation": {"node_id": 112, "id": "bytes4", "lineno": 119, "col_offset": 36, "ast_type": "Name", "end_col_offset": 42, "src": "4085:6:0", "end_lineno": 119}}], "node_id": 110, "default": null, "lineno": 119, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 48, "src": "4049:376:0", "end_lineno": 127}, "pos": null, "node_id": 109, "lineno": 119, "col_offset": 0, "body": [{"node_id": 116, "lineno": 127, "col_offset": 4, "ast_type": "Return", "end_col_offset": 48, "value": {"node_id": 117, "lineno": 127, "op": {"node_id": 120, "lineno": 127, "col_offset": 11, "ast_type": "In", "end_col_offset": 48, "src": "4388:37:0", "end_lineno": 127}, "col_offset": 11, "left": {"node_id": 118, "id": "interface_id", "lineno": 127, "col_offset": 11, "ast_type": "Name", "end_col_offset": 23, "src": "4388:12:0", "end_lineno": 127, "type": {"m": 4, "name": "bytes4", "typeclass": "bytes_m"}, "variable_reads": [{"name": "interface_id", "decl_node": {"node_id": 111, "source_id": 0}, "access_path": []}]}, "ast_type": "Compare", "end_col_offset": 48, "src": "4388:37:0", "end_lineno": 127, "right": {"node_id": 121, "id": "_SUPPORTED_INTERFACES", "lineno": 127, "col_offset": 27, "ast_type": "Name", "end_col_offset": 48, "src": "4404:21:0", "end_lineno": 127, "type": {"value_type": {"m": 4, "name": "bytes4", "typeclass": "bytes_m"}, "length": 2, "name": "$SArray", "typeclass": "static_array"}, "variable_reads": [{"name": "_SUPPORTED_INTERFACES", "decl_node": {"node_id": 33, "source_id": 0}, "access_path": []}]}, "type": {"name": "bool"}}, "src": "4381:44:0", "end_lineno": 127}], "ast_type": "FunctionDef", "end_col_offset": 48, "src": "4049:376:0", "decorator_list": [{"node_id": 123, "id": "external", "lineno": 117, "col_offset": 1, "ast_type": "Name", "end_col_offset": 9, "src": "4034:8:0", "end_lineno": 117}, {"node_id": 125, "id": "view", "lineno": 118, "col_offset": 1, "ast_type": "Name", "end_col_offset": 5, "src": "4044:4:0", "end_lineno": 118}], "doc_string": {"node_id": 129, "lineno": 120, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev Returns `True` if this contract implements the\n         interface defined by `interface_id`.\n    @param interface_id The 4-byte interface identifier.\n    @return bool The verification whether the contract\n            implements the interface or not.\n    ", "src": "4106:270:0", "end_lineno": 126}, "returns": {"node_id": 127, "id": "bool", "lineno": 119, "col_offset": 47, "ast_type": "Name", "end_col_offset": 51, "src": "4096:4:0", "end_lineno": 119}, "end_lineno": 127, "name": "supportsInterface"}, {"args": {"args": [{"node_id": 132, "lineno": 131, "arg": "role", "col_offset": 14, "ast_type": "arg", "end_col_offset": 27, "src": "4452:13:0", "end_lineno": 131, "annotation": {"node_id": 133, "id": "bytes32", "lineno": 131, "col_offset": 20, "ast_type": "Name", "end_col_offset": 27, "src": "4458:7:0", "end_lineno": 131}}, {"node_id": 135, "lineno": 131, "arg": "account", "col_offset": 29, "ast_type": "arg", "end_col_offset": 45, "src": "4467:16:0", "end_lineno": 131, "annotation": {"node_id": 136, "id": "address", "lineno": 131, "col_offset": 38, "ast_type": "Name", "end_col_offset": 45, "src": "4476:7:0", "end_lineno": 131}}], "node_id": 131, "default": null, "lineno": 131, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 35, "src": "4438:473:0", "end_lineno": 142}, "pos": null, "node_id": 130, "lineno": 131, "col_offset": 0, "body": [{"node_id": 140, "lineno": 141, "col_offset": 4, "ast_type": "Expr", "end_col_offset": 57, "value": {"args": [{"node_id": 146, "lineno": 141, "col_offset": 21, "slice": {"node_id": 151, "id": "role", "lineno": 141, "col_offset": 39, "ast_type": "Name", "end_col_offset": 43, "src": "4857:4:0", "end_lineno": 141, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 132, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 44, "value": {"node_id": 147, "lineno": 141, "attr": "getRoleAdmin", "col_offset": 21, "ast_type": "Attribute", "end_col_offset": 38, "value": {"node_id": 148, "id": "self", "lineno": 141, "col_offset": 21, "ast_type": "Name", "end_col_offset": 25, "src": "4839:4:0", "end_lineno": 141, "type": {"name": "self"}}, "src": "4839:17:0", "end_lineno": 141, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": []}]}, "src": "4839:23:0", "end_lineno": 141, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": ["$subscript_access"]}]}, {"node_id": 154, "lineno": 141, "attr": "sender", "col_offset": 46, "ast_type": "Attribute", "end_col_offset": 56, "value": {"node_id": 155, "id": "msg", "lineno": 141, "col_offset": 46, "ast_type": "Name", "end_col_offset": 49, "src": "4864:3:0", "end_lineno": 141, "type": {"name": "msg"}}, "src": "4864:10:0", "end_lineno": 141, "type": {"name": "address"}}], "node_id": 141, "lineno": 141, "func": {"node_id": 142, "lineno": 141, "attr": "_check_role", "col_offset": 4, "ast_type": "Attribute", "end_col_offset": 20, "value": {"node_id": 143, "id": "self", "lineno": 141, "col_offset": 4, "ast_type": "Name", "end_col_offset": 8, "src": "4822:4:0", "end_lineno": 141, "type": {"name": "self"}}, "src": "4822:16:0", "end_lineno": 141, "type": {"name": "_check_role", "type_decl_node": {"node_id": 286, "source_id": 0}, "typeclass": "contract_function"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "col_offset": 4, "ast_type": "Call", "end_col_offset": 57, "keywords": [], "src": "4822:53:0", "end_lineno": 141, "type": {"name": "(void)"}}, "src": "4822:53:0", "end_lineno": 141}, {"node_id": 158, "lineno": 142, "col_offset": 4, "ast_type": "Expr", "end_col_offset": 35, "value": {"args": [{"node_id": 164, "id": "role", "lineno": 142, "col_offset": 21, "ast_type": "Name", "end_col_offset": 25, "src": "4897:4:0", "end_lineno": 142, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 132, "source_id": 0}, "access_path": []}]}, {"node_id": 166, "id": "account", "lineno": 142, "col_offset": 27, "ast_type": "Name", "end_col_offset": 34, "src": "4903:7:0", "end_lineno": 142, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 135, "source_id": 0}, "access_path": []}]}], "node_id": 159, "lineno": 142, "func": {"node_id": 160, "lineno": 142, "attr": "_grant_role", "col_offset": 4, "ast_type": "Attribute", "end_col_offset": 20, "value": {"node_id": 161, "id": "self", "lineno": 142, "col_offset": 4, "ast_type": "Name", "end_col_offset": 8, "src": "4880:4:0", "end_lineno": 142, "type": {"name": "self"}}, "src": "4880:16:0", "end_lineno": 142, "type": {"name": "_grant_role", "type_decl_node": {"node_id": 368, "source_id": 0}, "typeclass": "contract_function"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}], "variable_writes": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "col_offset": 4, "ast_type": "Call", "end_col_offset": 35, "keywords": [], "src": "4880:31:0", "end_lineno": 142, "type": {"name": "(void)"}}, "src": "4880:31:0", "end_lineno": 142}], "ast_type": "FunctionDef", "end_col_offset": 35, "src": "4438:473:0", "decorator_list": [{"node_id": 168, "id": "external", "lineno": 130, "col_offset": 1, "ast_type": "Name", "end_col_offset": 9, "src": "4429:8:0", "end_lineno": 130}], "doc_string": {"node_id": 170, "lineno": 132, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev Grants `role` to `account`.\n    @notice If `account` had not been already\n            granted `role`, emits a `RoleGranted`\n            event. Note that the caller must have\n            `role`'s admin role.\n    @param role The 32-byte role definition.\n    @param account The 20-byte address of the account.\n    ", "src": "4490:327:0", "end_lineno": 140}, "returns": null, "end_lineno": 142, "name": "grantRole"}, {"args": {"args": [{"node_id": 173, "lineno": 146, "arg": "role", "col_offset": 15, "ast_type": "arg", "end_col_offset": 28, "src": "4939:13:0", "end_lineno": 146, "annotation": {"node_id": 174, "id": "bytes32", "lineno": 146, "col_offset": 21, "ast_type": "Name", "end_col_offset": 28, "src": "4945:7:0", "end_lineno": 146}}, {"node_id": 176, "lineno": 146, "arg": "account", "col_offset": 30, "ast_type": "arg", "end_col_offset": 46, "src": "4954:16:0", "end_lineno": 146, "annotation": {"node_id": 177, "id": "address", "lineno": 146, "col_offset": 39, "ast_type": "Name", "end_col_offset": 46, "src": "4963:7:0", "end_lineno": 146}}], "node_id": 172, "default": null, "lineno": 146, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 36, "src": "4924:454:0", "end_lineno": 156}, "pos": null, "node_id": 171, "lineno": 146, "col_offset": 0, "body": [{"node_id": 181, "lineno": 155, "col_offset": 4, "ast_type": "Expr", "end_col_offset": 57, "value": {"args": [{"node_id": 187, "lineno": 155, "col_offset": 21, "slice": {"node_id": 192, "id": "role", "lineno": 155, "col_offset": 39, "ast_type": "Name", "end_col_offset": 43, "src": "5323:4:0", "end_lineno": 155, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 173, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 44, "value": {"node_id": 188, "lineno": 155, "attr": "getRoleAdmin", "col_offset": 21, "ast_type": "Attribute", "end_col_offset": 38, "value": {"node_id": 189, "id": "self", "lineno": 155, "col_offset": 21, "ast_type": "Name", "end_col_offset": 25, "src": "5305:4:0", "end_lineno": 155, "type": {"name": "self"}}, "src": "5305:17:0", "end_lineno": 155, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": []}]}, "src": "5305:23:0", "end_lineno": 155, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": ["$subscript_access"]}]}, {"node_id": 195, "lineno": 155, "attr": "sender", "col_offset": 46, "ast_type": "Attribute", "end_col_offset": 56, "value": {"node_id": 196, "id": "msg", "lineno": 155, "col_offset": 46, "ast_type": "Name", "end_col_offset": 49, "src": "5330:3:0", "end_lineno": 155, "type": {"name": "msg"}}, "src": "5330:10:0", "end_lineno": 155, "type": {"name": "address"}}], "node_id": 182, "lineno": 155, "func": {"node_id": 183, "lineno": 155, "attr": "_check_role", "col_offset": 4, "ast_type": "Attribute", "end_col_offset": 20, "value": {"node_id": 184, "id": "self", "lineno": 155, "col_offset": 4, "ast_type": "Name", "end_col_offset": 8, "src": "5288:4:0", "end_lineno": 155, "type": {"name": "self"}}, "src": "5288:16:0", "end_lineno": 155, "type": {"name": "_check_role", "type_decl_node": {"node_id": 286, "source_id": 0}, "typeclass": "contract_function"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "col_offset": 4, "ast_type": "Call", "end_col_offset": 57, "keywords": [], "src": "5288:53:0", "end_lineno": 155, "type": {"name": "(void)"}}, "src": "5288:53:0", "end_lineno": 155}, {"node_id": 199, "lineno": 156, "col_offset": 4, "ast_type": "Expr", "end_col_offset": 36, "value": {"args": [{"node_id": 205, "id": "role", "lineno": 156, "col_offset": 22, "ast_type": "Name", "end_col_offset": 26, "src": "5364:4:0", "end_lineno": 156, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 173, "source_id": 0}, "access_path": []}]}, {"node_id": 207, "id": "account", "lineno": 156, "col_offset": 28, "ast_type": "Name", "end_col_offset": 35, "src": "5370:7:0", "end_lineno": 156, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 176, "source_id": 0}, "access_path": []}]}], "node_id": 200, "lineno": 156, "func": {"node_id": 201, "lineno": 156, "attr": "_revoke_role", "col_offset": 4, "ast_type": "Attribute", "end_col_offset": 21, "value": {"node_id": 202, "id": "self", "lineno": 156, "col_offset": 4, "ast_type": "Name", "end_col_offset": 8, "src": "5346:4:0", "end_lineno": 156, "type": {"name": "self"}}, "src": "5346:17:0", "end_lineno": 156, "type": {"name": "_revoke_role", "type_decl_node": {"node_id": 428, "source_id": 0}, "typeclass": "contract_function"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}], "variable_writes": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "col_offset": 4, "ast_type": "Call", "end_col_offset": 36, "keywords": [], "src": "5346:32:0", "end_lineno": 156, "type": {"name": "(void)"}}, "src": "5346:32:0", "end_lineno": 156}], "ast_type": "FunctionDef", "end_col_offset": 36, "src": "4924:454:0", "decorator_list": [{"node_id": 209, "id": "external", "lineno": 145, "col_offset": 1, "ast_type": "Name", "end_col_offset": 9, "src": "4915:8:0", "end_lineno": 145}], "doc_string": {"node_id": 211, "lineno": 147, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev Revokes `role` from `account`.\n    @notice If `account` had been granted `role`,\n            emits a `RoleRevoked` event. Note that\n            the caller must have `role`'s admin role.\n    @param role The 32-byte role definition.\n    @param account The 20-byte address of the account.\n    ", "src": "4977:306:0", "end_lineno": 154}, "returns": null, "end_lineno": 156, "name": "revokeRole"}, {"args": {"args": [{"node_id": 214, "lineno": 160, "arg": "role", "col_offset": 17, "ast_type": "arg", "end_col_offset": 30, "src": "5408:13:0", "end_lineno": 160, "annotation": {"node_id": 215, "id": "bytes32", "lineno": 160, "col_offset": 23, "ast_type": "Name", "end_col_offset": 30, "src": "5414:7:0", "end_lineno": 160}}, {"node_id": 217, "lineno": 160, "arg": "account", "col_offset": 32, "ast_type": "arg", "end_col_offset": 48, "src": "5423:16:0", "end_lineno": 160, "annotation": {"node_id": 218, "id": "address", "lineno": 160, "col_offset": 41, "ast_type": "Name", "end_col_offset": 48, "src": "5432:7:0", "end_lineno": 160}}], "node_id": 213, "default": null, "lineno": 160, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 36, "src": "5391:769:0", "end_lineno": 175}, "pos": null, "node_id": 212, "lineno": 160, "col_offset": 0, "body": [{"node_id": 222, "lineno": 174, "col_offset": 4, "test": {"node_id": 223, "lineno": 174, "op": {"node_id": 226, "lineno": 174, "col_offset": 11, "ast_type": "Eq", "end_col_offset": 32, "src": "6048:21:0", "end_lineno": 174}, "col_offset": 11, "left": {"node_id": 224, "id": "account", "lineno": 174, "col_offset": 11, "ast_type": "Name", "end_col_offset": 18, "src": "6048:7:0", "end_lineno": 174, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 217, "source_id": 0}, "access_path": []}]}, "ast_type": "Compare", "end_col_offset": 32, "src": "6048:21:0", "end_lineno": 174, "right": {"node_id": 227, "lineno": 174, "attr": "sender", "col_offset": 22, "ast_type": "Attribute", "end_col_offset": 32, "value": {"node_id": 228, "id": "msg", "lineno": 174, "col_offset": 22, "ast_type": "Name", "end_col_offset": 25, "src": "6059:3:0", "end_lineno": 174, "type": {"name": "msg"}}, "src": "6059:10:0", "end_lineno": 174, "type": {"name": "address"}}, "type": {"name": "bool"}}, "ast_type": "Assert", "msg": {"node_id": 231, "lineno": 174, "col_offset": 34, "ast_type": "Str", "end_col_offset": 86, "value": "access_control: can only renounce roles for itself", "src": "6071:52:0", "end_lineno": 174, "type": {"length": 50, "name": "String", "typeclass": "string"}}, "end_col_offset": 86, "src": "6041:82:0", "end_lineno": 174}, {"node_id": 232, "lineno": 175, "col_offset": 4, "ast_type": "Expr", "end_col_offset": 36, "value": {"args": [{"node_id": 238, "id": "role", "lineno": 175, "col_offset": 22, "ast_type": "Name", "end_col_offset": 26, "src": "6146:4:0", "end_lineno": 175, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 214, "source_id": 0}, "access_path": []}]}, {"node_id": 240, "id": "account", "lineno": 175, "col_offset": 28, "ast_type": "Name", "end_col_offset": 35, "src": "6152:7:0", "end_lineno": 175, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 217, "source_id": 0}, "access_path": []}]}], "node_id": 233, "lineno": 175, "func": {"node_id": 234, "lineno": 175, "attr": "_revoke_role", "col_offset": 4, "ast_type": "Attribute", "end_col_offset": 21, "value": {"node_id": 235, "id": "self", "lineno": 175, "col_offset": 4, "ast_type": "Name", "end_col_offset": 8, "src": "6128:4:0", "end_lineno": 175, "type": {"name": "self"}}, "src": "6128:17:0", "end_lineno": 175, "type": {"name": "_revoke_role", "type_decl_node": {"node_id": 428, "source_id": 0}, "typeclass": "contract_function"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}], "variable_writes": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "col_offset": 4, "ast_type": "Call", "end_col_offset": 36, "keywords": [], "src": "6128:32:0", "end_lineno": 175, "type": {"name": "(void)"}}, "src": "6128:32:0", "end_lineno": 175}], "ast_type": "FunctionDef", "end_col_offset": 36, "src": "5391:769:0", "decorator_list": [{"node_id": 242, "id": "external", "lineno": 159, "col_offset": 1, "ast_type": "Name", "end_col_offset": 9, "src": "5382:8:0", "end_lineno": 159}], "doc_string": {"node_id": 244, "lineno": 161, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev Revokes `role` from the calling account.\n    @notice Roles are often managed via `grantRole`\n            and `revokeRole`. This function's purpose\n            is to provide a mechanism for accounts to\n            lose their privileges if they are compromised\n            (such as when a trusted device is misplaced).\n            If the calling account had been granted `role`,\n            emits a `RoleRevoked` event. Note that the\n            caller must be `account`.\n    @param role The 32-byte role definition.\n    @param account The 20-byte address of the account.\n    ", "src": "5446:590:0", "end_lineno": 173}, "returns": null, "end_lineno": 175, "name": "renounceRole"}, {"args": {"args": [{"node_id": 247, "lineno": 179, "arg": "role", "col_offset": 19, "ast_type": "arg", "end_col_offset": 32, "src": "6192:13:0", "end_lineno": 179, "annotation": {"node_id": 248, "id": "bytes32", "lineno": 179, "col_offset": 25, "ast_type": "Name", "end_col_offset": 32, "src": "6198:7:0", "end_lineno": 179}}, {"node_id": 250, "lineno": 179, "arg": "admin_role", "col_offset": 34, "ast_type": "arg", "end_col_offset": 53, "src": "6207:19:0", "end_lineno": 179, "annotation": {"node_id": 251, "id": "bytes32", "lineno": 179, "col_offset": 46, "ast_type": "Name", "end_col_offset": 53, "src": "6219:7:0", "end_lineno": 179}}], "node_id": 246, "default": null, "lineno": 179, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 42, "src": "6173:405:0", "end_lineno": 188}, "pos": null, "node_id": 245, "lineno": 179, "col_offset": 0, "body": [{"node_id": 255, "lineno": 187, "col_offset": 4, "ast_type": "Expr", "end_col_offset": 57, "value": {"args": [{"node_id": 261, "lineno": 187, "col_offset": 21, "slice": {"node_id": 266, "id": "role", "lineno": 187, "col_offset": 39, "ast_type": "Name", "end_col_offset": 43, "src": "6517:4:0", "end_lineno": 187, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 247, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 44, "value": {"node_id": 262, "lineno": 187, "attr": "getRoleAdmin", "col_offset": 21, "ast_type": "Attribute", "end_col_offset": 38, "value": {"node_id": 263, "id": "self", "lineno": 187, "col_offset": 21, "ast_type": "Name", "end_col_offset": 25, "src": "6499:4:0", "end_lineno": 187, "type": {"name": "self"}}, "src": "6499:17:0", "end_lineno": 187, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": []}]}, "src": "6499:23:0", "end_lineno": 187, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": ["$subscript_access"]}]}, {"node_id": 269, "lineno": 187, "attr": "sender", "col_offset": 46, "ast_type": "Attribute", "end_col_offset": 56, "value": {"node_id": 270, "id": "msg", "lineno": 187, "col_offset": 46, "ast_type": "Name", "end_col_offset": 49, "src": "6524:3:0", "end_lineno": 187, "type": {"name": "msg"}}, "src": "6524:10:0", "end_lineno": 187, "type": {"name": "address"}}], "node_id": 256, "lineno": 187, "func": {"node_id": 257, "lineno": 187, "attr": "_check_role", "col_offset": 4, "ast_type": "Attribute", "end_col_offset": 20, "value": {"node_id": 258, "id": "self", "lineno": 187, "col_offset": 4, "ast_type": "Name", "end_col_offset": 8, "src": "6482:4:0", "end_lineno": 187, "type": {"name": "self"}}, "src": "6482:16:0", "end_lineno": 187, "type": {"name": "_check_role", "type_decl_node": {"node_id": 286, "source_id": 0}, "typeclass": "contract_function"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}, {"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "col_offset": 4, "ast_type": "Call", "end_col_offset": 57, "keywords": [], "src": "6482:53:0", "end_lineno": 187, "type": {"name": "(void)"}}, "src": "6482:53:0", "end_lineno": 187}, {"node_id": 273, "lineno": 188, "col_offset": 4, "ast_type": "Expr", "end_col_offset": 42, "value": {"args": [{"node_id": 279, "id": "role", "lineno": 188, "col_offset": 25, "ast_type": "Name", "end_col_offset": 29, "src": "6561:4:0", "end_lineno": 188, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 247, "source_id": 0}, "access_path": []}]}, {"node_id": 281, "id": "admin_role", "lineno": 188, "col_offset": 31, "ast_type": "Name", "end_col_offset": 41, "src": "6567:10:0", "end_lineno": 188, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "admin_role", "decl_node": {"node_id": 250, "source_id": 0}, "access_path": []}]}], "node_id": 274, "lineno": 188, "func": {"node_id": 275, "lineno": 188, "attr": "_set_role_admin", "col_offset": 4, "ast_type": "Attribute", "end_col_offset": 24, "value": {"node_id": 276, "id": "self", "lineno": 188, "col_offset": 4, "ast_type": "Name", "end_col_offset": 8, "src": "6540:4:0", "end_lineno": 188, "type": {"name": "self"}}, "src": "6540:20:0", "end_lineno": 188, "type": {"name": "_set_role_admin", "type_decl_node": {"node_id": 315, "source_id": 0}, "typeclass": "contract_function"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": []}, {"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": ["$subscript_access"]}], "variable_writes": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": ["$subscript_access"]}]}, "col_offset": 4, "ast_type": "Call", "end_col_offset": 42, "keywords": [], "src": "6540:38:0", "end_lineno": 188, "type": {"name": "(void)"}}, "src": "6540:38:0", "end_lineno": 188}], "ast_type": "FunctionDef", "end_col_offset": 42, "src": "6173:405:0", "decorator_list": [{"node_id": 283, "id": "external", "lineno": 178, "col_offset": 1, "ast_type": "Name", "end_col_offset": 9, "src": "6164:8:0", "end_lineno": 178}], "doc_string": {"node_id": 285, "lineno": 180, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev Sets `admin_role` as `role`'s admin role.\n    @notice Note that the caller must have `role`'s\n            admin role.\n    @param role The 32-byte role definition.\n    @param admin_role The new 32-byte admin role definition.\n    ", "src": "6233:244:0", "end_lineno": 186}, "returns": null, "end_lineno": 188, "name": "set_role_admin"}, {"args": {"args": [{"node_id": 288, "lineno": 193, "arg": "role", "col_offset": 16, "ast_type": "arg", "end_col_offset": 29, "src": "6613:13:0", "end_lineno": 193, "annotation": {"node_id": 289, "id": "bytes32", "lineno": 193, "col_offset": 22, "ast_type": "Name", "end_col_offset": 29, "src": "6619:7:0", "end_lineno": 193}}, {"node_id": 291, "lineno": 193, "arg": "account", "col_offset": 31, "ast_type": "arg", "end_col_offset": 47, "src": "6628:16:0", "end_lineno": 193, "annotation": {"node_id": 292, "id": "address", "lineno": 193, "col_offset": 40, "ast_type": "Name", "end_col_offset": 47, "src": "6637:7:0", "end_lineno": 193}}], "node_id": 287, "default": null, "lineno": 193, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 81, "src": "6597:329:0", "end_lineno": 200}, "pos": null, "node_id": 286, "lineno": 193, "col_offset": 0, "body": [{"node_id": 296, "lineno": 200, "col_offset": 4, "test": {"node_id": 297, "lineno": 200, "col_offset": 11, "slice": {"node_id": 306, "id": "account", "lineno": 200, "col_offset": 30, "ast_type": "Name", "end_col_offset": 37, "src": "6875:7:0", "end_lineno": 200, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 291, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 38, "value": {"node_id": 298, "lineno": 200, "col_offset": 11, "slice": {"node_id": 303, "id": "role", "lineno": 200, "col_offset": 24, "ast_type": "Name", "end_col_offset": 28, "src": "6869:4:0", "end_lineno": 200, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 288, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 29, "value": {"node_id": 299, "lineno": 200, "attr": "hasRole", "col_offset": 11, "ast_type": "Attribute", "end_col_offset": 23, "value": {"node_id": 300, "id": "self", "lineno": 200, "col_offset": 11, "ast_type": "Name", "end_col_offset": 15, "src": "6856:4:0", "end_lineno": 200, "type": {"name": "self"}}, "src": "6856:12:0", "end_lineno": 200, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}]}, "src": "6856:18:0", "end_lineno": 200, "type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}]}, "src": "6856:27:0", "end_lineno": 200, "type": {"name": "bool"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "ast_type": "Assert", "msg": {"node_id": 309, "lineno": 200, "col_offset": 40, "ast_type": "Str", "end_col_offset": 81, "value": "access_control: account is missing role", "src": "6885:41:0", "end_lineno": 200, "type": {"length": 39, "name": "String", "typeclass": "string"}}, "end_col_offset": 81, "src": "6849:77:0", "end_lineno": 200}], "ast_type": "FunctionDef", "end_col_offset": 81, "src": "6597:329:0", "decorator_list": [{"node_id": 310, "id": "internal", "lineno": 191, "col_offset": 1, "ast_type": "Name", "end_col_offset": 9, "src": "6582:8:0", "end_lineno": 191}, {"node_id": 312, "id": "view", "lineno": 192, "col_offset": 1, "ast_type": "Name", "end_col_offset": 5, "src": "6592:4:0", "end_lineno": 192}], "doc_string": {"node_id": 314, "lineno": 194, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev Reverts with a standard message if `account`\n         is missing `role`.\n    @param role The 32-byte role definition.\n    @param account The 20-byte address of the account.\n    ", "src": "6651:193:0", "end_lineno": 199}, "returns": null, "end_lineno": 200, "name": "_check_role"}, {"args": {"args": [{"node_id": 317, "lineno": 204, "arg": "role", "col_offset": 20, "ast_type": "arg", "end_col_offset": 33, "src": "6959:13:0", "end_lineno": 204, "annotation": {"node_id": 318, "id": "bytes32", "lineno": 204, "col_offset": 26, "ast_type": "Name", "end_col_offset": 33, "src": "6965:7:0", "end_lineno": 204}}, {"node_id": 320, "lineno": 204, "arg": "admin_role", "col_offset": 35, "ast_type": "arg", "end_col_offset": 54, "src": "6974:19:0", "end_lineno": 204, "annotation": {"node_id": 321, "id": "bytes32", "lineno": 204, "col_offset": 47, "ast_type": "Name", "end_col_offset": 54, "src": "6986:7:0", "end_lineno": 204}}], "node_id": 316, "default": null, "lineno": 204, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 114, "src": "6939:527:0", "end_lineno": 214}, "pos": null, "node_id": 315, "lineno": 204, "col_offset": 0, "body": [{"node_id": 325, "lineno": 212, "col_offset": 4, "ast_type": "AnnAssign", "end_col_offset": 58, "value": {"node_id": 330, "lineno": 212, "col_offset": 35, "slice": {"node_id": 335, "id": "role", "lineno": 212, "col_offset": 53, "ast_type": "Name", "end_col_offset": 57, "src": "7305:4:0", "end_lineno": 212, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 317, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 58, "value": {"node_id": 331, "lineno": 212, "attr": "getRoleAdmin", "col_offset": 35, "ast_type": "Attribute", "end_col_offset": 52, "value": {"node_id": 332, "id": "self", "lineno": 212, "col_offset": 35, "ast_type": "Name", "end_col_offset": 39, "src": "7287:4:0", "end_lineno": 212, "type": {"name": "self"}}, "src": "7287:17:0", "end_lineno": 212, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": []}]}, "src": "7287:23:0", "end_lineno": 212, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": ["$subscript_access"]}]}, "src": "7256:54:0", "end_lineno": 212, "target": {"node_id": 326, "id": "previous_admin_role", "lineno": 212, "col_offset": 4, "ast_type": "Name", "end_col_offset": 23, "src": "7256:19:0", "end_lineno": 212, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "previous_admin_role", "decl_node": {"node_id": 325, "source_id": 0}, "access_path": []}]}, "annotation": {"node_id": 328, "id": "bytes32", "lineno": 212, "col_offset": 25, "ast_type": "Name", "end_col_offset": 32, "src": "7277:7:0", "end_lineno": 212}}, {"node_id": 338, "lineno": 213, "col_offset": 4, "ast_type": "Assign", "end_col_offset": 40, "value": {"node_id": 347, "id": "admin_role", "lineno": 213, "col_offset": 30, "ast_type": "Name", "end_col_offset": 40, "src": "7341:10:0", "end_lineno": 213, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "admin_role", "decl_node": {"node_id": 320, "source_id": 0}, "access_path": []}]}, "src": "7315:36:0", "end_lineno": 213, "target": {"node_id": 339, "lineno": 213, "col_offset": 4, "slice": {"node_id": 344, "id": "role", "lineno": 213, "col_offset": 22, "ast_type": "Name", "end_col_offset": 26, "src": "7333:4:0", "end_lineno": 213, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 317, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 27, "value": {"node_id": 340, "lineno": 213, "attr": "getRoleAdmin", "col_offset": 4, "ast_type": "Attribute", "end_col_offset": 21, "value": {"node_id": 341, "id": "self", "lineno": 213, "col_offset": 4, "ast_type": "Name", "end_col_offset": 8, "src": "7315:4:0", "end_lineno": 213, "type": {"name": "self"}}, "src": "7315:17:0", "end_lineno": 213, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": []}]}, "src": "7315:23:0", "end_lineno": 213, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": ["$subscript_access"]}], "variable_writes": [{"name": "getRoleAdmin", "decl_node": {"node_id": 72, "source_id": 0}, "access_path": ["$subscript_access"]}]}}, {"node_id": 350, "lineno": 214, "col_offset": 4, "ast_type": "Log", "end_col_offset": 114, "value": {"args": [], "node_id": 351, "lineno": 214, "func": {"node_id": 352, "lineno": 214, "attr": "RoleAdminChanged", "col_offset": 8, "ast_type": "Attribute", "end_col_offset": 39, "value": {"node_id": 353, "id": "IAccessControl", "lineno": 214, "col_offset": 8, "ast_type": "Name", "end_col_offset": 22, "src": "7360:14:0", "end_lineno": 214, "type": {"type_t": {"name": "src/snekmate/auth/interfaces/IAccessControl.vyi", "type_decl_node": {"node_id": 0, "source_id": 1}, "typeclass": "interface"}}}, "src": "7360:31:0", "end_lineno": 214, "type": {"type_t": {"name": "RoleAdminChanged", "type_decl_node": {"node_id": 3, "source_id": 1}, "typeclass": "event"}}}, "col_offset": 8, "ast_type": "Call", "end_col_offset": 114, "keywords": [{"node_id": 356, "lineno": 214, "arg": "role", "col_offset": 40, "ast_type": "keyword", "end_col_offset": 49, "value": {"node_id": 357, "id": "role", "lineno": 214, "col_offset": 45, "ast_type": "Name", "end_col_offset": 49, "src": "7397:4:0", "end_lineno": 214, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 317, "source_id": 0}, "access_path": []}]}, "src": "7392:9:0", "end_lineno": 214}, {"node_id": 359, "lineno": 214, "arg": "previousAdminRole", "col_offset": 51, "ast_type": "keyword", "end_col_offset": 88, "value": {"node_id": 360, "id": "previous_admin_role", "lineno": 214, "col_offset": 69, "ast_type": "Name", "end_col_offset": 88, "src": "7421:19:0", "end_lineno": 214, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "previous_admin_role", "decl_node": {"node_id": 325, "source_id": 0}, "access_path": []}]}, "src": "7403:37:0", "end_lineno": 214}, {"node_id": 362, "lineno": 214, "arg": "newAdminRole", "col_offset": 90, "ast_type": "keyword", "end_col_offset": 113, "value": {"node_id": 363, "id": "admin_role", "lineno": 214, "col_offset": 103, "ast_type": "Name", "end_col_offset": 113, "src": "7455:10:0", "end_lineno": 214, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "admin_role", "decl_node": {"node_id": 320, "source_id": 0}, "access_path": []}]}, "src": "7442:23:0", "end_lineno": 214}], "src": "7360:106:0", "end_lineno": 214, "type": {"name": "(void)"}}, "src": "7356:110:0", "end_lineno": 214, "type": {"name": "RoleAdminChanged", "type_decl_node": {"node_id": 3, "source_id": 1}, "typeclass": "event"}}], "ast_type": "FunctionDef", "end_col_offset": 114, "src": "6939:527:0", "decorator_list": [{"node_id": 365, "id": "internal", "lineno": 203, "col_offset": 1, "ast_type": "Name", "end_col_offset": 9, "src": "6930:8:0", "end_lineno": 203}], "doc_string": {"node_id": 367, "lineno": 205, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev Sets `admin_role` as `role`'s admin role.\n    @notice This is an `internal` function without\n            access restriction.\n    @param role The 32-byte role definition.\n    @param admin_role The new 32-byte admin role definition.\n    ", "src": "7000:251:0", "end_lineno": 211}, "returns": null, "end_lineno": 214, "name": "_set_role_admin"}, {"args": {"args": [{"node_id": 370, "lineno": 218, "arg": "role", "col_offset": 16, "ast_type": "arg", "end_col_offset": 29, "src": "7495:13:0", "end_lineno": 218, "annotation": {"node_id": 371, "id": "bytes32", "lineno": 218, "col_offset": 22, "ast_type": "Name", "end_col_offset": 29, "src": "7501:7:0", "end_lineno": 218}}, {"node_id": 373, "lineno": 218, "arg": "account", "col_offset": 31, "ast_type": "arg", "end_col_offset": 47, "src": "7510:16:0", "end_lineno": 218, "annotation": {"node_id": 374, "id": "address", "lineno": 218, "col_offset": 40, "ast_type": "Name", "end_col_offset": 47, "src": "7519:7:0", "end_lineno": 218}}], "node_id": 369, "default": null, "lineno": 218, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 85, "src": "7479:454:0", "end_lineno": 228}, "pos": null, "node_id": 368, "lineno": 218, "col_offset": 0, "body": [{"node_id": 378, "lineno": 226, "col_offset": 4, "body": [{"node_id": 393, "lineno": 227, "col_offset": 8, "ast_type": "Assign", "end_col_offset": 42, "value": {"node_id": 406, "lineno": 227, "col_offset": 38, "ast_type": "NameConstant", "end_col_offset": 42, "value": true, "src": "7843:4:0", "end_lineno": 227, "type": {"name": "bool"}}, "src": "7813:34:0", "end_lineno": 227, "target": {"node_id": 394, "lineno": 227, "col_offset": 8, "slice": {"node_id": 403, "id": "account", "lineno": 227, "col_offset": 27, "ast_type": "Name", "end_col_offset": 34, "src": "7832:7:0", "end_lineno": 227, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 373, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 35, "value": {"node_id": 395, "lineno": 227, "col_offset": 8, "slice": {"node_id": 400, "id": "role", "lineno": 227, "col_offset": 21, "ast_type": "Name", "end_col_offset": 25, "src": "7826:4:0", "end_lineno": 227, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 370, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 26, "value": {"node_id": 396, "lineno": 227, "attr": "hasRole", "col_offset": 8, "ast_type": "Attribute", "end_col_offset": 20, "value": {"node_id": 397, "id": "self", "lineno": 227, "col_offset": 8, "ast_type": "Name", "end_col_offset": 12, "src": "7813:4:0", "end_lineno": 227, "type": {"name": "self"}}, "src": "7813:12:0", "end_lineno": 227, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}]}, "src": "7813:18:0", "end_lineno": 227, "type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}]}, "src": "7813:27:0", "end_lineno": 227, "type": {"name": "bool"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}], "variable_writes": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}}, {"node_id": 408, "lineno": 228, "col_offset": 8, "ast_type": "Log", "end_col_offset": 85, "value": {"args": [], "node_id": 409, "lineno": 228, "func": {"node_id": 410, "lineno": 228, "attr": "RoleGranted", "col_offset": 12, "ast_type": "Attribute", "end_col_offset": 38, "value": {"node_id": 411, "id": "IAccessControl", "lineno": 228, "col_offset": 12, "ast_type": "Name", "end_col_offset": 26, "src": "7860:14:0", "end_lineno": 228, "type": {"type_t": {"name": "src/snekmate/auth/interfaces/IAccessControl.vyi", "type_decl_node": {"node_id": 0, "source_id": 1}, "typeclass": "interface"}}}, "src": "7860:26:0", "end_lineno": 228, "type": {"type_t": {"name": "RoleGranted", "type_decl_node": {"node_id": 28, "source_id": 1}, "typeclass": "event"}}}, "col_offset": 12, "ast_type": "Call", "end_col_offset": 85, "keywords": [{"node_id": 414, "lineno": 228, "arg": "role", "col_offset": 39, "ast_type": "keyword", "end_col_offset": 48, "value": {"node_id": 415, "id": "role", "lineno": 228, "col_offset": 44, "ast_type": "Name", "end_col_offset": 48, "src": "7892:4:0", "end_lineno": 228, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 370, "source_id": 0}, "access_path": []}]}, "src": "7887:9:0", "end_lineno": 228}, {"node_id": 417, "lineno": 228, "arg": "account", "col_offset": 50, "ast_type": "keyword", "end_col_offset": 65, "value": {"node_id": 418, "id": "account", "lineno": 228, "col_offset": 58, "ast_type": "Name", "end_col_offset": 65, "src": "7906:7:0", "end_lineno": 228, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 373, "source_id": 0}, "access_path": []}]}, "src": "7898:15:0", "end_lineno": 228}, {"node_id": 420, "lineno": 228, "arg": "sender", "col_offset": 67, "ast_type": "keyword", "end_col_offset": 84, "value": {"node_id": 421, "lineno": 228, "attr": "sender", "col_offset": 74, "ast_type": "Attribute", "end_col_offset": 84, "value": {"node_id": 422, "id": "msg", "lineno": 228, "col_offset": 74, "ast_type": "Name", "end_col_offset": 77, "src": "7922:3:0", "end_lineno": 228, "type": {"name": "msg"}}, "src": "7922:10:0", "end_lineno": 228, "type": {"name": "address"}}, "src": "7915:17:0", "end_lineno": 228}], "src": "7860:73:0", "end_lineno": 228, "type": {"name": "(void)"}}, "src": "7856:77:0", "end_lineno": 228, "type": {"name": "RoleGranted", "type_decl_node": {"node_id": 28, "source_id": 1}, "typeclass": "event"}}], "test": {"node_id": 379, "lineno": 226, "op": {"node_id": 380, "lineno": 226, "col_offset": 7, "ast_type": "Not", "end_col_offset": 38, "src": "7772:31:0", "end_lineno": 226}, "col_offset": 7, "ast_type": "UnaryOp", "end_col_offset": 38, "src": "7772:31:0", "operand": {"node_id": 381, "lineno": 226, "col_offset": 11, "slice": {"node_id": 390, "id": "account", "lineno": 226, "col_offset": 30, "ast_type": "Name", "end_col_offset": 37, "src": "7795:7:0", "end_lineno": 226, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 373, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 38, "value": {"node_id": 382, "lineno": 226, "col_offset": 11, "slice": {"node_id": 387, "id": "role", "lineno": 226, "col_offset": 24, "ast_type": "Name", "end_col_offset": 28, "src": "7789:4:0", "end_lineno": 226, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 370, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 29, "value": {"node_id": 383, "lineno": 226, "attr": "hasRole", "col_offset": 11, "ast_type": "Attribute", "end_col_offset": 23, "value": {"node_id": 384, "id": "self", "lineno": 226, "col_offset": 11, "ast_type": "Name", "end_col_offset": 15, "src": "7776:4:0", "end_lineno": 226, "type": {"name": "self"}}, "src": "7776:12:0", "end_lineno": 226, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}]}, "src": "7776:18:0", "end_lineno": 226, "type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}]}, "src": "7776:27:0", "end_lineno": 226, "type": {"name": "bool"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "end_lineno": 226, "type": {"name": "bool"}}, "ast_type": "If", "end_col_offset": 85, "src": "7769:164:0", "end_lineno": 228, "orelse": []}], "ast_type": "FunctionDef", "end_col_offset": 85, "src": "7479:454:0", "decorator_list": [{"node_id": 425, "id": "internal", "lineno": 217, "col_offset": 1, "ast_type": "Name", "end_col_offset": 9, "src": "7470:8:0", "end_lineno": 217}], "doc_string": {"node_id": 427, "lineno": 219, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev Grants `role` to `account`.\n    @notice This is an `internal` function without\n            access restriction.\n    @param role The 32-byte role definition.\n    @param account The 20-byte address of the account.\n    ", "src": "7533:231:0", "end_lineno": 225}, "returns": null, "end_lineno": 228, "name": "_grant_role"}, {"args": {"args": [{"node_id": 430, "lineno": 232, "arg": "role", "col_offset": 17, "ast_type": "arg", "end_col_offset": 30, "src": "7963:13:0", "end_lineno": 232, "annotation": {"node_id": 431, "id": "bytes32", "lineno": 232, "col_offset": 23, "ast_type": "Name", "end_col_offset": 30, "src": "7969:7:0", "end_lineno": 232}}, {"node_id": 433, "lineno": 232, "arg": "account", "col_offset": 32, "ast_type": "arg", "end_col_offset": 48, "src": "7978:16:0", "end_lineno": 232, "annotation": {"node_id": 434, "id": "address", "lineno": 232, "col_offset": 41, "ast_type": "Name", "end_col_offset": 48, "src": "7987:7:0", "end_lineno": 232}}], "node_id": 429, "default": null, "lineno": 232, "col_offset": 0, "defaults": [], "ast_type": "arguments", "end_col_offset": 85, "src": "7946:455:0", "end_lineno": 242}, "pos": null, "node_id": 428, "lineno": 232, "col_offset": 0, "body": [{"node_id": 438, "lineno": 240, "col_offset": 4, "body": [{"node_id": 451, "lineno": 241, "col_offset": 8, "ast_type": "Assign", "end_col_offset": 43, "value": {"node_id": 464, "lineno": 241, "col_offset": 38, "ast_type": "NameConstant", "end_col_offset": 43, "value": false, "src": "8310:5:0", "end_lineno": 241, "type": {"name": "bool"}}, "src": "8280:35:0", "end_lineno": 241, "target": {"node_id": 452, "lineno": 241, "col_offset": 8, "slice": {"node_id": 461, "id": "account", "lineno": 241, "col_offset": 27, "ast_type": "Name", "end_col_offset": 34, "src": "8299:7:0", "end_lineno": 241, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 433, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 35, "value": {"node_id": 453, "lineno": 241, "col_offset": 8, "slice": {"node_id": 458, "id": "role", "lineno": 241, "col_offset": 21, "ast_type": "Name", "end_col_offset": 25, "src": "8293:4:0", "end_lineno": 241, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 430, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 26, "value": {"node_id": 454, "lineno": 241, "attr": "hasRole", "col_offset": 8, "ast_type": "Attribute", "end_col_offset": 20, "value": {"node_id": 455, "id": "self", "lineno": 241, "col_offset": 8, "ast_type": "Name", "end_col_offset": 12, "src": "8280:4:0", "end_lineno": 241, "type": {"name": "self"}}, "src": "8280:12:0", "end_lineno": 241, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}]}, "src": "8280:18:0", "end_lineno": 241, "type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}]}, "src": "8280:27:0", "end_lineno": 241, "type": {"name": "bool"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}], "variable_writes": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}}, {"node_id": 466, "lineno": 242, "col_offset": 8, "ast_type": "Log", "end_col_offset": 85, "value": {"args": [], "node_id": 467, "lineno": 242, "func": {"node_id": 468, "lineno": 242, "attr": "RoleRevoked", "col_offset": 12, "ast_type": "Attribute", "end_col_offset": 38, "value": {"node_id": 469, "id": "IAccessControl", "lineno": 242, "col_offset": 12, "ast_type": "Name", "end_col_offset": 26, "src": "8328:14:0", "end_lineno": 242, "type": {"type_t": {"name": "src/snekmate/auth/interfaces/IAccessControl.vyi", "type_decl_node": {"node_id": 0, "source_id": 1}, "typeclass": "interface"}}}, "src": "8328:26:0", "end_lineno": 242, "type": {"type_t": {"name": "RoleRevoked", "type_decl_node": {"node_id": 53, "source_id": 1}, "typeclass": "event"}}}, "col_offset": 12, "ast_type": "Call", "end_col_offset": 85, "keywords": [{"node_id": 472, "lineno": 242, "arg": "role", "col_offset": 39, "ast_type": "keyword", "end_col_offset": 48, "value": {"node_id": 473, "id": "role", "lineno": 242, "col_offset": 44, "ast_type": "Name", "end_col_offset": 48, "src": "8360:4:0", "end_lineno": 242, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 430, "source_id": 0}, "access_path": []}]}, "src": "8355:9:0", "end_lineno": 242}, {"node_id": 475, "lineno": 242, "arg": "account", "col_offset": 50, "ast_type": "keyword", "end_col_offset": 65, "value": {"node_id": 476, "id": "account", "lineno": 242, "col_offset": 58, "ast_type": "Name", "end_col_offset": 65, "src": "8374:7:0", "end_lineno": 242, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 433, "source_id": 0}, "access_path": []}]}, "src": "8366:15:0", "end_lineno": 242}, {"node_id": 478, "lineno": 242, "arg": "sender", "col_offset": 67, "ast_type": "keyword", "end_col_offset": 84, "value": {"node_id": 479, "lineno": 242, "attr": "sender", "col_offset": 74, "ast_type": "Attribute", "end_col_offset": 84, "value": {"node_id": 480, "id": "msg", "lineno": 242, "col_offset": 74, "ast_type": "Name", "end_col_offset": 77, "src": "8390:3:0", "end_lineno": 242, "type": {"name": "msg"}}, "src": "8390:10:0", "end_lineno": 242, "type": {"name": "address"}}, "src": "8383:17:0", "end_lineno": 242}], "src": "8328:73:0", "end_lineno": 242, "type": {"name": "(void)"}}, "src": "8324:77:0", "end_lineno": 242, "type": {"name": "RoleRevoked", "type_decl_node": {"node_id": 53, "source_id": 1}, "typeclass": "event"}}], "test": {"node_id": 439, "lineno": 240, "col_offset": 7, "slice": {"node_id": 448, "id": "account", "lineno": 240, "col_offset": 26, "ast_type": "Name", "end_col_offset": 33, "src": "8262:7:0", "end_lineno": 240, "type": {"name": "address"}, "variable_reads": [{"name": "account", "decl_node": {"node_id": 433, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 34, "value": {"node_id": 440, "lineno": 240, "col_offset": 7, "slice": {"node_id": 445, "id": "role", "lineno": 240, "col_offset": 20, "ast_type": "Name", "end_col_offset": 24, "src": "8256:4:0", "end_lineno": 240, "type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "variable_reads": [{"name": "role", "decl_node": {"node_id": 430, "source_id": 0}, "access_path": []}]}, "ast_type": "Subscript", "end_col_offset": 25, "value": {"node_id": 441, "lineno": 240, "attr": "hasRole", "col_offset": 7, "ast_type": "Attribute", "end_col_offset": 19, "value": {"node_id": 442, "id": "self", "lineno": 240, "col_offset": 7, "ast_type": "Name", "end_col_offset": 11, "src": "8243:4:0", "end_lineno": 240, "type": {"name": "self"}}, "src": "8243:12:0", "end_lineno": 240, "type": {"key_type": {"m": 32, "name": "bytes32", "typeclass": "bytes_m"}, "value_type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": []}]}, "src": "8243:18:0", "end_lineno": 240, "type": {"key_type": {"name": "address"}, "value_type": {"name": "bool"}, "name": "HashMap", "typeclass": "hashmap"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access"]}]}, "src": "8243:27:0", "end_lineno": 240, "type": {"name": "bool"}, "variable_reads": [{"name": "hasRole", "decl_node": {"node_id": 48, "source_id": 0}, "access_path": ["$subscript_access", "$subscript_access"]}]}, "ast_type": "If", "end_col_offset": 85, "src": "8240:161:0", "end_lineno": 242, "orelse": []}], "ast_type": "FunctionDef", "end_col_offset": 85, "src": "7946:455:0", "decorator_list": [{"node_id": 483, "id": "internal", "lineno": 231, "col_offset": 1, "ast_type": "Name", "end_col_offset": 9, "src": "7937:8:0", "end_lineno": 231}], "doc_string": {"node_id": 485, "lineno": 233, "col_offset": 4, "ast_type": "DocStr", "end_col_offset": 7, "value": "\n    @dev Revokes `role` from `account`.\n    @notice This is an `internal` function without\n            access restriction.\n    @param role The 32-byte role definition.\n    @param account The 20-byte address of the account.\n    ", "src": "8001:234:0", "end_lineno": 239}, "returns": null, "end_lineno": 242, "name": "_revoke_role"}], "ast_type": "Module", "end_col_offset": 84, "src": "0:8400:0", "doc_string": {"node_id": 486, "lineno": 3, "col_offset": 0, "ast_type": "DocStr", "end_col_offset": 3, "value": "\n@title Multi-Role-Based Access Control Functions\n@custom:contract-name access_control\n@license GNU Affero General Public License v3.0 only\n@author pcaversaccio\n@notice These functions can be used to implement role-based access\n        control mechanisms. Roles are referred to by their `bytes32`\n        identifier. These should be exposed in the external API and\n        be unique. The best way to achieve this is by using `public`\n        `constant` hash digests:\n        ```vy\n        MY_ROLE: public(constant(bytes32)) = keccak256(\"MY_ROLE\");\n        ```\n\n        Roles can be used to represent a set of permissions. To restrict\n        access to a function call, use the `external` function `hasRole`\n        or the `internal` function `_check_role` (to avoid any NatSpec\n        parsing error, no `@` character is added to the visibility decorator\n        `@external` in the following examples; please add them accordingly):\n        ```vy\n        from ethereum.ercs import IERC165\n        implements: IERC165\n\n        from snekmate.auth.interfaces import IAccessControl\n        implements: IAccessControl\n\n        from snekmate.auth import access_control\n        initializes: access_control\n\n        exports: access_control.__interface__\n\n        ...\n\n        external\n        def foo():\n            assert access_control.hasRole[MY_ROLE][msg.sender], \"access_control: account is missing role\"\n            ...\n\n        OR\n\n        external\n        def foo():\n            access_control._check_role(MY_ROLE, msg.sender)\n            ...\n        ```\n\n        Roles can be granted and revoked dynamically via the `grantRole`\n        and `revokeRole` functions. Each role has an associated admin role,\n        and only accounts that have a role's admin role can call `grantRole`\n        and `revokeRole`. Also, by default, the admin role for all roles is\n        `DEFAULT_ADMIN_ROLE`, which means that only accounts with this role\n        will be able to grant or revoke other roles. More complex role\n        relationships can be created by using `set_role_admin`.\n\n        WARNING: The `DEFAULT_ADMIN_ROLE` is also its own admin! It has\n        permission to grant and revoke this role. Extra precautions should be\n        taken to secure accounts that have been granted it.\n\n        The implementation is inspired by OpenZeppelin's implementation here:\n        https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/access/AccessControl.sol.\n", "src": "52:2475:0", "end_lineno": 63}, "is_interface": false, "end_lineno": 242, "name": null, "path": "src/snekmate/auth/access_control.vy", "settings": {"nonreentrancy_by_default": false}, "type": {"name": "src/snekmate/auth/access_control.vy", "type_decl_node": {"node_id": 0, "source_id": 0}, "typeclass": "module"}}